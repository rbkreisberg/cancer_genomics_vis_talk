//circvis.wedge.js
// vq.CircVis = function() {
//     vq.Vis.call(this);
// };
// vq.CircVis.prototype = vq.extend(vq.Vis);
var CircVis=function(a){function u(a){return _.uniq(_.flatten(_.chain(a).map(function(a){return[a.source||a.node1,a.target||a.node2]}).value()))}function o(a,b){delete b._layout[b._hash(a)]}function n(a){var c=b._wedge[a];if(!!_.isFunction(c._y_linear)&&c._draw_axes){var d=c._y_linear.ticks(4);d3.select('.ideogram .wedge[data-ring="'+a+'"] .axes').append("svg:g").attr("class","labels").selectAll("g.text").data(d).enter().append("svg:text").each(function(){$(this).disableSelection()}).attr("transform",function(a){return"translate(0,-"+c._y_linear(a)+")"}).text(function(a){return a})}}function l(a,c){function f(c){var d=b._wedge[c],e=d._plot_type;m[e]!==undefined&&m[e](a,c);var f=d3.selectAll('.ideogram[data-region="'+a+'"] .wedge[data-ring="'+c+'"] .data > *');f.on("mouseover",function(a){d.hovercard.call(this,a)})}var d=this,e=_.isUndefined(c)||_.isNull(c);if(!e&&_.isNumber(c)&&_.isFinite(c)&&c>=b._wedge.length)console.error("drawWedgeData: Invalid wedge #:"+c);else{if(e){_.each(_.range(0,b._wedge.length),function(a){f.call(d,a)});return}f.call(d,c)}}function k(a,c){var d=b._ideograms[a],e=b._wedge[c],f=d.wedge[c],g=d3.select('.ideogram[data-region="'+a+'"] .wedge[data-ring="'+c+'"]');if(e._draw_axes){var h=b._chrom.groups[a],i=h.startAngle,j=h.angle,k=e._y_linear.ticks(4);g.append("svg:g").attr("class","axes").selectAll("path").data(k).enter().append("svg:path").style("fill","#ddd").style("stroke","#555").style("stroke-width","1.0px").attr("d",d3.svg.arc().innerRadius(function(a){return e._y_linear(a)}).outerRadius(function(a){return e._y_linear(a)}).startAngle(0).endAngle(j))}l(a,c)}function j(a,c){var d=b._ideograms[a],e=b._wedge[c],f=d.wedge[c]}function i(a){function h(c){var d=d3.select(this),e=b._wedge[c];if(e._plot_type!="karyotype"&&e._plot_type!="tile"&&e._plot_type!="band"&&e._plot_type!="glyph"){if(isNaN(e._min_plotValue)||isNaN(e._max_plotValue)){console.warn("Range of values for ring with index ("+c+") not detected.  Data has not been plotted.");return}e._min_plotValue==e._max_plotValue&&(e._min_plotValue=e._min_plotValue-1,e._max_plotValue=e._max_plotValue+1,console.warn("Invalid value range detected.  Range reset to [-1,1]."))}g(a,c)}function e(a){return b._wedge[a]._innerRadius}function d(a){return b._wedge[a]._outerPlotRadius}var c=d3.select('.ideogram[data-region="'+a+'"]'),f=c.append("svg:g").attr("class","wedges").selectAll("path").data(_.range(0,b._wedge.length)).enter().append("svg:g").attr("class","wedge").attr("clip-path",function(a){return"url(#ring_clip_"+a+")"}).attr("data-ring",function(a){return a});f.append("svg:path").attr("class","background").attr("d",d3.svg.arc().innerRadius(function(a){return e(a)}).outerRadius(function(a){return d(a)}).startAngle(0).endAngle(b._chrom.groups[a].angle)),f.append("svg:g").attr("class","data"),c.selectAll("g.wedge").each(h)}function h(a){var c=b._wedge[a]._outerRadius,d=b._wedge[a]._innerRadius,e=d3.svg.arc()({innerRadius:d,outerRadius:c,startAngle:0,endAngle:2*Math.PI});d3.select("svg .circvis defs").append("svg:clipPath").attr("id","ring_clip_"+a).append("svg:path").attr("d",e)}function g(a,c){var d=b._ideograms[a],e=d3.select('.ideogram[data-region="'+a+'"] .wedge[data-ring="'+c+'"]'),f=b._wedge[c];switch(f._plot_type){case"karyotype":case"tile":case"band":case"heatmap":case"glyph":l(a,c);break;default:k(a,c)}}var b=new vq.models.CircVisData(a),c=function(){b.isDataReady()?d():console.warn("Invalid data input.  Check data for missing or improperly formatted values.");return this},d=function(){function g(a,b){}function f(a,b){}function d(b,d){function n(a,b){return a[0]*b[0]+a[1]*b[1]}function m(a,b){return a[0]*b[1]-a[1]*b[0]}var e=d3.transform(d3.select(this).attr("transform")),f=e.translate,g=e.scale,h=e.rotate,i=a/2*g[0],j=c/2*g[1],k=[d3.event.x-i,d3.event.y-j],l=[d3.event.x-d3.event.dx-i,d3.event.y-d3.event.dy-j],o=Math.atan2(m(l,k),n(l,k))*180/Math.PI;h+=o,d3.select(this).attr("transform","translate("+f[0]+","+f[1]+")scale("+g+")rotate("+h+")")}var a=b._plot.width,c=b._plot.height,i=d3.behavior.drag().on("dragstart",f).on("drag",d).on("dragend",g),j=b._plot.id,k=d3.select(b._plot.container).append("svg:svg").attr("id",j).attr("width",a).attr("height",c).append("svg:g").attr("class","circvis").attr("transform","translate("+a/2+","+c/2+")").call(i);k.insert("svg:defs");var l=k.selectAll("g.ideogram").data(b._chrom.keys).enter().append("svg:g").attr("class","ideogram").attr("data-region",function(a){return a}).attr("opacity",1).attr("transform",function(a){return"rotate("+b._chrom.groups[a].startAngle*180/Math.PI+")"}).each(e),m=b._plot.height/2,o=m-b.ticks.outer_padding,p=o-b.ticks.height,q=(o+p)/2;l.append("text").attr("transform",function(a){return"rotate("+(b._chrom.groups[a].endAngle-b._chrom.groups[a].startAngle)*180/Math.PI/2+" )translate(0,-"+q+")"}).attr("class","region_label").attr("stroke","black").attr("text-anchor","middle").attr("dy",".35em").attr("cursor","pointer").text(function(a){return a}).each(function(){$(this).disableSelection()}).on("mouseover",function(a){var c={},d=b.normalizedLength[a],e=1-d,f=_.size(b.normalizedLength);_.each(b.normalizedLength,function(a,b,d){c[b]=a/e/2}),c[a]=.5});if(!_.isNull(b._chrom.radial_grid_line_width)&&b._chrom.radial_grid_line_width>0){var s=b._network.network_radius;l.selectAll("path.radial_lines").data(function(a){return[[{x:0,y:-1*o},{x:0,y:-1*s[a]}]]}).enter().insert("svg:path",".wedges").attr("class","radial_lines").attr("d",d3.svg.line().x(function(a){return a.x}).y(function(a){return a.y}).interpolate("linear"))}b._network._doRender&&t(k.insert("svg:g",".ideogram").attr("class","links")),_(_.range(0,b._wedge.length)).each(function(a){n(a),h(a)});return this},e=function(a){i(a),f(a)},f=function(a){b._chrom.groups[a]!==undefined&&(_(_.range(0,b._wedge.length)).each(function(b){l(a,b)}),p(a),b._network._doRender&&r(a))},m={barchart:function(a,c){var d=b._wedge[c],e=b._ideograms[a].wedge[c],f=d._value_key,g=d3.select('.ideogram[data-region="'+a+'"] .wedge[data-ring="'+c+'"]'),h=function(c){var e=d._innerRadius,f=b._ideograms[a].theta(c.start),g=b._ideograms[a].theta(c.end);return d3.svg.arc().innerRadius(e).startAngle(f).endAngle(g)},i=g.select("g.data").selectAll("path").data(e,d._hash);i.enter().append("svg:path").style("fill",d._fillStyle).style("stroke",d._strokeStyle).style("stroke-width",d._lineWidth).style("fill-opacity",1e-6).style("stroke-opacity",1e-6).transition().duration(800).attrTween("d",function(a){var b=d3.interpolate({outerRadius:d._innerRadius},{outerRadius:d._thresholded_outerRadius(a[f])}),c=h(a);return function(a){return c(b(a))}}).style("fill-opacity",1).style("stroke-opacity",1),i.exit().transition().duration(800).attrTween("d",function(a){var b=d3.interpolate({outerRadius:d._thresholded_outerRadius(a[f])},{outerRadius:d._innerRadius}),c=h(a);return function(a){return c(b(a))}}).style("fill-opacity",1e-6).style("stroke-opacity",1e-6).remove()},scatterplot:function(a,c){var d=b._wedge[c],e=b._ideograms[a].wedge[c],f=d._value_key,g=vq.utils.VisUtils.tileCenter,h=d3.select('.ideogram[data-region="'+a+'"] .wedge[data-ring="'+c+'"]'),i=h.select("g.data").selectAll("path").data(e,d._hash);i.enter().append("svg:path").style("fill",d._fillStyle).style("stroke",d._strokeStyle).style("fill-opacity",1e-6).style("stroke-opacity",1e-6).attr("transform",function(c){return"rotate("+(b._ideograms[a].theta(g(c))*180/Math.PI-90)+")translate("+d._thresholded_value_to_radius(c[f])+")"}).attr("d",d3.svg.symbol().type(d._shape).size(Math.pow(d._radius(),2))).transition().duration(800).style("fill-opacity",1).style("stroke-opacity",1),i.exit().transition().duration(800).style("fill-opacity",1e-6).style("stroke-opacity",1e-6).remove()},line:function(a,c){var d=b._wedge[c],e=_.sortBy(b._ideograms[a].wedge[c],"start"),f=d._value_key,g=vq.utils.VisUtils.tileCenter,h=d3.select('.ideogram[data-region="'+a+'"] .wedge[data-ring="'+c+'"]'),i=d3.svg.line.radial().interpolate("basis").tension(.8).radius(function(a){return d._thresholded_value_to_radius(a[f])}).angle(function(c){return b._ideograms[a].theta(g(c))}),j=h.select("g.data").selectAll("path").data([e]);j.enter().append("svg:path").style("fill",d._fillStyle).style("stroke",d._strokeStyle).style("fill-opacity",1e-6).style("stroke-opacity",1e-6).attr("d",i).transition().duration(800).style("stroke-opacity",1),j.exit().transition().duration(800).style("fill-opacity",1e-6).style("stroke-opacity",1e-6).remove()},area:function(a,c){var d=b._wedge[c],e=_.sortBy(b._ideograms[a].wedge[c],"start"),f=d._value_key,g=vq.utils.VisUtils.tileCenter,h=d3.select('.ideogram[data-region="'+a+'"] .wedge[data-ring="'+c+'"]'),i=d3.svg.line.radial().interpolate("basis").tension(.8).radius(function(a){return d._thresholded_value_to_radius(a[f])}).angle(function(c){return b._ideograms[a].theta(g(c))}),j=d3.svg.area.radial().interpolate("basis").tension(.8).innerRadius(function(a){return d._thresholded_innerRadius(a[f])}).outerRadius(function(a){return d._thresholded_outerRadius(a[f])}).angle(function(c){return b._ideograms[a].theta(g(c))}),k=h.select("g.data").selectAll("path").data([e]);k.enter().append("svg:path").style("fill",d._fillStyle).style("stroke",d._strokeStyle).style("fill-opacity",1e-6).style("stroke-opacity",1e-6).attr("d",i).transition().duration(800).style("stroke-opacity",1),k.enter().append("svg:path").style("fill",d._fillStyle).style("stroke",d._strokeStyle).style("fill-opacity",1e-6).style("stroke-opacity",1e-6).attr("d",j).transition().duration(800).style("fill-opacity",.7),k.exit().transition().duration(800).style("fill-opacity",1e-6).style("stroke-opacity",1e-6).remove()},band:function(a,c){var d=b._wedge[c],e=b._ideograms[a].wedge[c],f=d._value_key,g=d3.select('.ideogram[data-region="'+a+'"] .wedge[data-ring="'+c+'"]'),h=g.select("g.data").selectAll("path").data(e,d._hash);h.enter().append("svg:path").style("fill",d._fillStyle).style("stroke",d._strokeStyle).style("fill-opacity",1e-6).style("stroke-opacity",1e-6).attr("d",d3.svg.arc().innerRadius(d._innerRadius).outerRadius(d._outerPlotRadius).startAngle(function(c){return b._ideograms[a].theta(c.start)}).endAngle(function(c){return b._ideograms[a].theta(c.end)})).transition().duration(800).style("fill-opacity",1).style("stroke-opacity",1),h.exit().transition().duration(800).style("fill-opacity",1e-6).style("stroke-opacity",1e-6).remove()},glyph:function(a,c){var d=vq.utils.VisUtils.tileCenter,e=b._wedge[c],f=b._ideograms[a].wedge[c],g=e._value_key,h=d3.select('.ideogram[data-region="'+a+'"] .wedge[data-ring="'+c+'"]'),i=h.select("g.data").selectAll("path").data(f,e._hash);i.enter().append("svg:path").style("fill",e._fillStyle).style("stroke",e._strokeStyle).style("fill-opacity",1e-6).style("stroke-opacity",1e-6).attr("transform",function(c){return"rotate("+(b._ideograms[a].theta(d(c))*180/Math.PI-90)+")translate("+e._glyph_distance(c)+")"}).transition().duration(800).attr("d",d3.svg.symbol().type(e._shape).size(Math.pow(e._radius(),2))).transition().duration(800).style("fill-opacity",1).style("stroke-opacity",1),i.exit().transition().duration(800).style("fill-opacity",1e-6).style("stroke-opacity",1e-6).remove().each("end",function(a){o(a,wedge)})},tile:function(a,c){var d=b._wedge[c],e=b._ideograms[a].wedge[c],f=d._value_key,g=d3.select('.ideogram[data-region="'+a+'"] .wedge[data-ring="'+c+'"]'),h=g.select("g.data").selectAll("path").data(e,d._hash);h.enter().append("svg:path").style("fill",d._fillStyle).style("stroke",d._strokeStyle).style("fill-opacity",1e-6).style("stroke-opacity",1e-6).attr("d",d3.svg.arc().innerRadius(function(a){return d._thresholded_tile_innerRadius(a,d)}).outerRadius(function(a){return d._thresholded_tile_outerRadius(a,d)}).startAngle(function(c){return b._ideograms[a].theta(c.start)}).endAngle(function(c){return b._ideograms[a].theta(c.end)})).transition().duration(800).style("fill-opacity",1).style("stroke-opacity",1),h.exit().transition().duration(800).style("fill-opacity",1e-6).style("stroke-opacity",1e-6).remove().each("end",function(a){o(a,wedge)})},karyotype:function(a,c){var d=b._wedge[c],e=b._ideograms[a].wedge[c],f=d._value_key,g=d3.select('.ideogram[data-region="'+a+'"] .wedge[data-ring="'+c+'"]'),h=g.select("g.data").selectAll("path").data(e,d._hash);h.enter().append("svg:path").style("fill",function(a){return a[f]}).style("stroke",d._strokeStyle).style("fill-opacity",1e-6).style("stroke-opacity",1e-6).attr("d",d3.svg.arc().innerRadius(d._innerRadius).outerRadius(d._outerPlotRadius).startAngle(function(c){return b._ideograms[a].theta(c.start)}).endAngle(function(c){return b._ideograms[a].theta(c.end)})).transition().duration(800).style("fill-opacity",1).style("stroke-opacity",1),h.exit().transition().duration(800).style("fill-opacity",1e-6).style("stroke-opacity",1e-6).remove()},heatmap:function(a,c){var d=b._wedge[c],e=b._ideograms[a].wedge[c],f=d._value_key,g=d3.select('.ideogram[data-region="'+a+'"] .wedge[data-ring="'+c+'"]'),h=function(c){var e=b._ideograms[a].theta(c.start),f=b._ideograms[a].theta(c.end);return d3.svg.arc().innerRadius(function(a){return d._innerRadius-a*4}).outerRadius(function(a){return d._outerPlotRadius+a*4}).startAngle(function(a){return e-a*Math.PI/360}).endAngle(function(a){return f+a*Math.PI/360})},i=g.select("g.data").selectAll("path").data(e,d._hash);i.enter().append("svg:path").style("fill",d._fillStyle).style("stroke",d._strokeStyle).style("stroke-width","1px").style("fill-opacity",1e-6).style("stroke-opacity",1e-6).attr("d",d3.svg.arc().innerRadius(d._innerRadius).outerRadius(d._outerPlotRadius).startAngle(function(c){return b._ideograms[a].theta(c.start)}).endAngle(function(c){return b._ideograms[a].theta(c.end)})).transition().duration(800).transition().duration(800).style("fill-opacity",1).style("stroke-opacity",1).attrTween("d",function(a){var b=d3.interpolate(4,0),c=h(a);return function(a){return c(b(a))}}),i.exit().transition().duration(800).style("fill-opacity",1e-6).style("stroke-opacity",1e-6).remove()}};m.histogram=m.barchart;var p=function(a){var c=this;if(!!b.ticks.render_ticks){var d=b._data.hash,e=d3.select('.ideogram[data-region="'+a+'"]'),f=function(a){return b.ticks._layout[d(a)]},g=b._plot.height/2,h=g-b.ticks.outer_padding,i=h-b.ticks.height,j=b.ticks.tile_ticks?function(a){return i+f(a)*b.ticks.wedge_height*1.3}:function(a){return i},k=function(a){return j(a)+b.ticks.wedge_height},l=function(a){return b.ticks.fill_style(a,d)},m=function(a){return b.ticks.stroke_style(a,d)},n=function(a){var b=r/j(a);return o(a)?b*2:b},o=function(a){return!0},p=Math.PI/180*b.ticks.wedge_width,r=p*i,s=vq.utils.VisUtils.tileCenter,t=function(a){var c=j(a),d=k(a),e=b._ideograms[a.chr].theta(s(a)),f=n(a);return d3.svg.arc().innerRadius(function(a){return c-a*4}).outerRadius(function(a){return d+a*4}).startAngle(function(a){return e-a*Math.PI/360}).endAngle(function(a){return e+f+a*Math.PI/360})},u=b._network.node_key;e.select("g.ticks").empty()&&e.append("svg:g").attr("class","ticks");var v=e.select("g.ticks").selectAll("path").data(b._data.chr[a],b._data.hash);v.enter().append("path").attr("class",function(a){return a[d]}).style("fill",l).style("stroke",m).style("fill-opacity",1e-6).style("stroke-opacity",1e-6).on("mouseover",function(a){d3.select("text[data-label='"+a[d]+"']").attr("visibility","visible"),b.ticks.hovercard.call(this,a)}).on("mouseout",function(a){d3.select("text[data-label='"+a[d]+"']").attr("visibility","hidden")}).transition().duration(800).attrTween("d",function(a){var b=d3.interpolate(4,0),c=t(a);return function(a){return c(b(a))}}).style("fill-opacity",1).style("stroke-opacity",1),v.exit().transition().duration(800).attrTween("d",function(a){var b=d3.interpolate(0,4),c=t(a);return function(a){return c(b(a))}}).style("fill-opacity",1e-6).style("stroke-opacity",1e-6).remove().each("end",q)}},q=function(a){delete b.ticks._layout[b._data.hash(a)]},r=function(a){var c=b._data.hash,d=function(a){return b._network.layout[c(a)]},e=vq.utils.VisUtils.tileCenter,f=b._network.tile_nodes?function(c){return b._network.network_radius[a]-d(c)*2*b._network.node_radius(c)}:function(c){return b._network.network_radius[a]},g=d3.select('.ideogram[data-region="'+a+'"]');g.select("g.nodes").empty()&&g.append("svg:g").attr("class","nodes");var h=g.select("g.nodes").selectAll("circle.node").data(_.where(b._data.features,{chr:a}),c),i=h.enter(),j=h.exit();i.append("svg:circle").attr("class","node").attr("cx",0).attr("cy",0).attr("r",function(a){return b._network.node_radius(a)*4}).style("fill",b._network.node_fillStyle).style("stroke",b._network.node_strokeStyle).style("fill-opacity",1e-6).style("stroke-opacity",1e-6).attr("transform",function(c){return"rotate("+(b._ideograms[a].theta(e(c))/Math.PI*180-90)+")translate("+f(c)+")"}).on("mouseover",function(a){b._network.node_hovercard.call(this,a)}).transition().duration(800).attr("r",b._network.node_radius).style("stroke-opacity",1).style("fill-opacity",1),j.transition().duration(800).attr("r",function(a){return b._network.node_radius(a)*4}).style("fill-opacity",1e-6).style("stroke-opacity",1e-6).remove()},s=function(a){delete b._network.layout[b._data.hash(a)]},t=function(){var a=b._data.hash,c=vq.utils.VisUtils.tileCenter,d=function(c){return b._network.layout[a(c)]},e=d3.layout.bundle(),f=b._network.tile_nodes?function(a){return b._network.network_radius[a.chr]-d(a)*2*b._network.node_radius(a)}:function(a){return b._network.network_radius[a.chr]},g=d3.svg.line.radial().interpolate("bundle").tension(.65).radius(function(a){return a.radius!==undefined?a.radius:f(a)}).angle(function(a){return a.angle!==undefined?a.angle:b._ideograms[a.chr]._feature_angle(c(a))}),h=e(b._network.links_array).map(function(a,c){return _.extend(b._network.links_array[c],{spline:a})}),i=d3.select("g.links").selectAll("path.link").data(h);i.enter().insert("svg:path").attr("class",function(a){return"link t_"+a.source.chr+" p_"+a.target.chr}).style("fill","none").style("stroke",b._network.link_strokeStyle).style("stroke-width",function(a){return b._network.link_line_width(a)*3}).style("stroke-opacity",1e-6).attr("d",function(a){return g(a.spline)}).on("mouseover",function(a){d3.select(this).style("stroke-opacity",1),b._network.link_hovercard.call(this,a)}).on("mouseout",function(a){d3.select(this).style("stroke-opacity",b._network.link_alpha(a))}).transition().duration(800).style("stroke-width",b._network.link_line_width).style("stroke-opacity",b._network.link_alpha),i.exit().transition().duration(800).style("stroke-opacity",1e-6).style("stroke-width",function(a){return b._network.link_line_width(a)*3}).remove()};c.size=function(a,c){var d,e;a.length&&a.length==2?(d=a[0],e=a[1]):arguments.length==1?d=e=a:(d=a,e=c);var f=d/b._plot.width,g=e/b._plot.height,h=d3.select("#"+b._plot.id).select(".circvis"),i=d3.transform(h.attr("transform")),j=i.translate,k=i.scale,l=i.rotate,m=a/2*k[0],n=c/2*k[1];h.transition().duration(500).attr("transform","translate("+d/2+","+e/2+")scale("+f+","+g+")rotate("+l+")"),d3.select("#"+b._plot.id).transition().duration(500).attr("width",d).attr("height",e)},c.addEdges=function(a){var b;_.isArray(a)?b=this._insertEdges(a):b=this._insertEdges([a]);var c=_.flatten(_.map(b,function(a){return[a.source,a.target]}));this.addNodes(c),t()},c.removeEdges=function(a,c){var d=_.isBoolean(c)?c:Boolean(!1);a==="all"&&(a=b._network.links_array),_.isArray(a)?_.each(a,function(a){b._removeEdge(a)}):_.isObject(a)&&b._removeEdge(a),t();if(!d){var e=u(a),f=u(b._network.links_array),g=_.difference(e,f);this.removeNodes(g)}},c._insertEdges=function(a){return _.filter(_.map(a,vq.models.CircVisData.prototype._insertEdge,b),function(a){return!_.isNull(a)})},c.addNodes=function(a){var c=this;_.isArray(a)?b._insertNodes(a):b._insertNodes([a]),_.each(_.uniq(_.pluck(a,"chr")),f)},c.removeNodes=function(a){var c=this;_.isFunction(a)&&(a=_.filter(b._data.features,a)),_.isArray(a)?(_.each(a,function(a){b._removeNode(a)}),_.each(_.uniq(_.pluck(a,"chr")),f)):_.isObject(a)&&(b._removeNode(a),f(a.chr))};return c};vq.CircVis=CircVis,vq.models.CircVisData=function(a){vq.models.VisData.call(this,a),this.setDataModel(),this.getDataType()=="vq.models.CircVisData"?this._build_data(this.getContents()):console.warn("Unrecognized JSON object.  Expected vq.models.CircVisData object.")},vq.models.CircVisData.prototype=vq.extend(vq.models.VisData),vq.models.CircVisData.prototype.setDataModel=function(){this._dataModel=[{label:"_plot.width",id:"PLOT.width",defaultValue:400},{label:"_plot.height",id:"PLOT.height",defaultValue:400},{label:"_plot.container",id:"PLOT.container",optional:!0},{label:"_plot.vertical_padding",id:"PLOT.vertical_padding",defaultValue:0},{label:"_plot.horizontal_padding",id:"PLOT.horizontal_padding",defaultValue:0},{label:"_plot.enable_pan",id:"PLOT.enable_pan",cast:Boolean,defaultValue:!1},{label:"_plot.enable_zoom",id:"PLOT.enable_zoom",cast:Boolean,defaultValue:!1},{label:"_plot.show_legend",id:"PLOT.show_legend",cast:Boolean,defaultValue:!1},{label:"_plot.legend_corner",id:"PLOT.legend_corner",cast:String,defaultValue:"ne"},{label:"_plot.legend_radius",id:"PLOT.legend_radius",cast:Number,defaultValue:25},{label:"_plot.legend_show_rings",id:"PLOT.legend_show_rings",cast:Boolean,defaultValue:!0},{label:"_plot.rotate_degrees",id:"PLOT.rotate_degrees",cast:Number,defaultValue:0},{label:"_plot.tooltip_timeout",id:"PLOT.tooltip_timeout",cast:Number,defaultValue:200},{label:"_data.features",id:"DATA.features",defaultValue:[]},{label:"_data.edges",id:"DATA.edges",defaultValue:[]},{label:"_data.hash",id:"DATA.hash",defaultValue:[]},{label:"_chrom.keys",id:"GENOME.DATA.key_order",defaultValue:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","X","Y"]},{label:"_chrom.length",id:"GENOME.DATA.key_length",defaultValue:[]},{label:"_chrom.reverse_list",id:"GENOME.OPTIONS.key_reverse_list",optional:!0},{label:"_chrom.gap_degrees",id:"GENOME.OPTIONS.gap_degrees",cast:Number,defaultValue:0},{label:"_chrom.label_layout_style",id:"GENOME.OPTIONS.label_layout_style",defaultValue:"default"},{label:"_chrom.label_font_style",id:"GENOME.OPTIONS.label_font_style",cast:String,defaultValue:"16px helvetica, monospaced"},{label:"_chrom.radial_grid_line_width",id:"GENOME.OPTIONS.radial_grid_line_width",cast:Number,defaultValue:null},{label:"_chrom.listener",id:"GENOME.OPTIONS.listener",cast:Function,defaultValue:function(){return null}},{label:"_network._doRender",id:"NETWORK.OPTIONS.render",defaultValue:!0,cast:Boolean},{label:"_network._outer_padding",id:"NETWORK.OPTIONS.outer_padding",defaultValue:0,cast:Number},{label:"_network.node_listener",id:"NETWORK.OPTIONS.node_listener",cast:Function,defaultValue:function(){return null}},{label:"_network.link_listener",id:"NETWORK.OPTIONS.link_listener",cast:Function,defaultValue:function(){return null}},{label:"_network.link_tooltipItems",id:"NETWORK.OPTIONS.link_tooltip_items",defaultValue:{"Node 1 Chr":"sourceNode.chr","Node 1 Start":"sourceNode.start","Node1 End":"sourceNode.end","Node 2 Chr":"targetNode.chr","Node 2 Start":"targetNode.start","Node 2 End":"targetNode.end"}},{label:"_network.link_tooltipLinks",id:"NETWORK.OPTIONS.link_tooltip_links",defaultValue:{}},{label:"_network.link_line_width",id:"NETWORK.OPTIONS.link_line_width",cast:vq.utils.VisUtils.wrapProperty,defaultValue:function(a,b){return 1}},{label:"_network.link_alpha",id:"NETWORK.OPTIONS.link_alpha",cast:vq.utils.VisUtils.wrapProperty,defaultValue:function(){return.7}},{label:"_network.link_strokeStyle",id:"NETWORK.OPTIONS.link_stroke_style",cast:vq.utils.VisUtils.wrapProperty,defaultValue:function(){return"steelblue"}},{label:"_network.node_fillStyle",id:"NETWORK.OPTIONS.node_fill_style",cast:vq.utils.VisUtils.wrapProperty,defaultValue:function(){return"green"}},{label:"_network.node_radius",id:"NETWORK.OPTIONS.node_radius",cast:vq.utils.VisUtils.wrapProperty,defaultValue:function(){return 3}},{label:"_network.node_highlightMode",id:"NETWORK.OPTIONS.node_highlight_mode",cast:String,defaultValue:"brighten"},{label:"_network.node_tooltipFormat",id:"NETWORK.OPTIONS.node_tooltipFormat",cast:vq.utils.VisUtils.wrapProperty,defaultValue:vq.utils.VisUtils.network_node_title},{label:"_network.node_tooltipItems",id:"NETWORK.OPTIONS.node_tooltip_items",defaultValue:{Chr:"chr",Start:"start",End:"end"}},{label:"_network.node_tooltipLinks",id:"NETWORK.OPTIONS.node_tooltip_links",defaultValue:{}},{label:"_network.max_node_linkDegree",id:"NETWORK.OPTIONS.max_node_linkdegree",cast:Number,defaultValue:9999},{label:"_network.min_node_linkDegree",id:"NETWORK.OPTIONS.min_node_linkdegree",cast:Number,defaultValue:0},{label:"_network.node_overlap_distance",id:"NETWORK.OPTIONS.node_overlap_distance",cast:Number,defaultValue:12e6},{label:"_network.tile_nodes",id:"NETWORK.OPTIONS.tile_nodes",cast:Boolean,defaultValue:!1},{label:"ticks.tooltipItems",id:"TICKS.OPTIONS.tooltip_items",defaultValue:{Chr:"chr",Start:"start",End:"end",Label:"value"}},{label:"ticks.tooltipLinks",id:"TICKS.OPTIONS.tooltip_links",defaultValue:{}},{label:"ticks.label_map",id:"TICKS.OPTIONS.label_map",defaultValue:[{key:"",label:""}]},{label:"ticks.render_ticks",id:"TICKS.OPTIONS.render_ticks",cast:Boolean,defaultValue:Boolean(!0)},{label:"ticks.label_key",id:"TICKS.OPTIONS.label_key",defaultValue:"value",cast:String},{label:"ticks.height",id:"TICKS.OPTIONS.height",cast:Number,defaultValue:60},{label:"ticks.wedge_width",id:"TICKS.OPTIONS.wedge_width",cast:Number,defaultValue:.2},{label:"ticks.wedge_height",id:"TICKS.OPTIONS.wedge_height",cast:Number,defaultValue:10},{label:"ticks.outer_padding",id:"TICKS.OPTIONS.outer_padding",cast:Number,defaultValue:0},{label:"ticks.listener",id:"TICKS.OPTIONS.listener",cast:Function,defaultValue:function(){return null}},{label:"ticks.display_legend",id:"TICKS.OPTIONS.display_legend",cast:Boolean,defaultValue:!0},{label:"ticks.legend_corner",id:"TICKS.OPTIONS.legend_corner",cast:String,defaultValue:"nw"},{label:"ticks.tile_ticks",id:"TICKS.OPTIONS.tile_ticks",cast:Boolean,defaultValue:!0},{label:"ticks.overlap_distance",id:"TICKS.OPTIONS.overlap_distance",cast:Number,optional:!0},{label:"ticks.fill_style",id:"TICKS.OPTIONS.fill_style",cast:vq.utils.VisUtils.wrapProperty,defaultValue:function(){return"red"}},{label:"ticks.stroke_style",id:"TICKS.OPTIONS.stroke_style",cast:vq.utils.VisUtils.wrapProperty,defaultValue:function(){return"white"}},{label:"_wedge",id:"WEDGE",optional:!0}]},vq.models.CircVisData.prototype._build_data=function(a){var b=a;this._processData(b),this._wedge&&(this._wedge=this._wedge.map(function(a){return new vq.models.CircVisData.WedgeData(a)})),this._setupData()},vq.models.CircVisData.prototype._setupData=function(){var a={},b,c=[],d,e={},f,g=[],h={},i={},j=[],k=[],l={},m;this.normalizedLength,this.theta=[],this.startAngle_map={};var n=this;this._plot.id="C"+vq.utils.VisUtils.guid();if(this._chrom.keys==[]||this._chrom.length==[])console.warn("Chromosome/Ideogram information has not been detected.  Please verify that keys and length/key mappings have been passed into the GENOME.DATA object.");else{var o=this._chrom.keys;_.each(o,function(b,c){a[b]=c}),c=this._chrom.length.filter(function(b){return a[b.chr_name]!==null}),c.sort(function(b,c){return a[b.chr_name]-a[c.chr_name]>0}),m=vq.sum(c,function(a){return a.chr_length});var p=1-this._chrom.gap_degrees*o.length/360;b={},_.each(c,function(a){b[a.chr_name.toUpperCase()]=a.chr_length,i[a.chr_name.toUpperCase()]=a.chr_length*p/m}),this.normalizedLength=i;var q={},r=this._plot.rotate_degrees*Math.PI/180,s=this._chrom.gap_degrees*Math.PI/180;_.each(o,function(c,d){e[c]=_.reduce(o.slice(0,a[c]),function(a,b,c){return a+i[o[c]]*2*Math.PI+s},0),l[c]=d3.scale.linear().domain([0,b[c.toUpperCase()]]).range([0,2*Math.PI*i[c]]),n._chrom.reverse_list!==undefined&&n._chrom.reverse_list.filter(function(a){return a==c}).length>0?l[c]=d3.scale.linear().domain([0,b[c.toUpperCase()]]).range([2*Math.PI*i[c],0]):l[c]=d3.scale.linear().domain([0,b[c.toUpperCase()]]).range([0,2*Math.PI*i[c]]),q[c]={key:c,startAngle:e[c],endAngle:e[c]+2*Math.PI*i[c],theta:l[c],angle:2*Math.PI*i[c]}}),this.theta=l,this._ideograms={},this._data.chr={},_.each(n._chrom.keys,function(a){h[a]=e[a]+r,n._ideograms[a]=_.extend(q[a],{wedge:[],_feature_angle:function(a){return this.startAngle+this.theta(a)}}),n._data.chr[a]=[]}),this.startAngle_map=h,this._chrom.groups=q;if(this._data.features,length)this._data.chr=_.groupBy(this._data.features,"chr");if(this._wedge!==undefined){var t=[],d={};_.each(this._wedge,function(a,b){a._globalData=!0;if(a._globalData=!Boolean(a._data.length))a._data=n._data.features;a._hash=_.isUndefined(a._hash)?n._data.hash:a._hash;if(a._plot_type=="tile"||a._plot_type=="glyph"){var c=a._tile.show_all_tiles?Math.floor((a._plot_height-a._radius()*2)/(a._tile.height+a._tile.padding)):undefined;t=a._plot_type=="tile"?vq.utils.VisUtils.layoutChrTiles(a._data,a._tile.overlap_distance,c):vq.utils.VisUtils.layoutChrTicks(a._data,a._tile.overlap_distance,c),a._layout={},_.each(t,function(b){a._layout[a._hash(b)]=b.level})}a._chr=a._globalData?n._data.chr:_.groupBy(a._data,"chr"),a._outerRadius=n._plot.height/2-vq.sum(n._wedge.slice(0,b),function(a){return a._plot_height+a._outer_padding})-(n.ticks.outer_padding+n.ticks.height),a._outerPlotRadius=a._outerRadius-a._outer_padding,a._innerRadius=a._outerPlotRadius-a._plot_height,_.each(n._chrom.keys,function(c){n._ideograms[c]._outerRadius=n._plot.height/2-n.ticks.outer_padding+n.ticks.height,n._ideograms[c].wedge[b]=a._chr[c]}),a.hovercard=vq.hovercard({canvas_id:n._plot.id,include_header:!1,include_footer:!0,self_hover:!0,timeout:n._plot.tooltip_timeout,data_config:a._tooltipItems,tool_config:a._tooltipLinks});if(a._plot_type!="karyotype"){var d=a._value_key;j=Math.sqrt(science.stats.variance(_.pluck(a._data,d))),k=science.stats.median(_.pluck(a._data,d)),a._min_plotValue=a._min_plotValue===undefined?parseFloat((-1*j+k).toFixed(2)):a._min_plotValue,a._max_plotValue=a._max_plotValue===undefined?parseFloat((j+k).toFixed(2)):a._max_plotValue,a._range_mean=a._base_plotValue!=null?a._base_plotValue:(a._min_plotValue+a._max_plotValue)/2,a._y_linear=d3.scale.linear().domain([a._min_plotValue,a._max_plotValue]).range([a._innerRadius,a._outerRadius-a._outer_padding]).nice(),a._y_axis=d3.scale.linear().domain([a._min_plotValue,a._max_plotValue]).range([a._innerRadius,a._outerPlotRadius]),a._thresholded_innerRadius=function(b){return Math.max(a._y_axis(Math.min(b,a._range_mean)),a._innerRadius)},a._thresholded_outerRadius=function(b){return Math.min(a._y_axis(Math.max(b,a._range_mean)),a._outerPlotRadius)},a._thresholded_value_to_radius=function(b){return Math.min(Math.max(a._y_axis(b),a._innerRadius),a._outerPlotRadius)},a._thresholded_radius=function(b){return Math.min(Math.max(b,a._innerRadius),a._outerPlotRadius)},a._thresholded_tile_innerRadius=function(b,c){return a._innerRadius+(c._tile.height+c._tile.padding)*a._layout[a._hash(b)]},a._thresholded_tile_outerRadius=function(b,c){return a._innerRadius+(c._tile.height+c._tile.padding)*a._layout[a._hash(b)]+c._tile.height},a._plot_type=="glyph"&&(a._glyph_distance=function(b){return(a._tile.height+a._tile.padding)*a._layout[a._hash(b)]+a._innerRadius+a._radius(b)},a._checked_endAngle=function(a,b){return n._chrom.keys.length==1?Math.min(n.startAngle_map[b]+n.theta[b](a.end||a.start+1),n.startAngle_map[n._chrom.keys[0]]+Math.PI*2):this.parent.index+1==n._chrom.keys.length?Math.min(n.startAngle_map[b]+n.theta[b](a.end||a.start+1),n.startAngle_map[n._chrom.keys[0]]+Math.PI*2):Math.min(n.startAngle_map[b]+n.theta[b](a.end||a.start+1),n.startAngle_map[n._chrom.keys[(this.parent.index+1)%n._chrom.keys.length]])}),delete a._data}})}if(n.ticks.tile_ticks){if(n.ticks.overlap_distance===undefined){var u=7e6/3080419480;n.ticks.overlap_distance=u*m}var v=vq.utils.VisUtils.layoutChrTicks(this._data.features,n.ticks.overlap_distance),w=this.ticks._layout={},x=n._data.hash;_.each(v,function(a){w[x(a)]=a.level})}this.ticks.data_map=n._data.chr,this.ticks.hovercard=vq.hovercard({canvas_id:n._plot.id,include_header:!1,include_footer:!0,self_hover:!0,timeout:n._plot.tooltip_timeout,data_config:n.ticks.tooltipItems,tool_config:n.ticks.tooltipLinks});var y={};_.each(n._chrom.keys,function(a){y[a]={}});var z={},A=[{parent:null,chr:null,radius:0,angle:0}];n._network.network_radius={},n._network.layout={},o.forEach(function(a,b){var c=n._ideograms[a].wedge.length>0?n._wedge[n._ideograms[a].wedge.length-1]._innerRadius:n._plot.height/2-n.ticks.outer_padding-n.ticks.height,d=n._network.network_radius[a]=c-n._network._outer_padding;z[a]=b+1;var e={chr:a,parent:A[0],radius
:d/2,angle:(n._chrom.groups[a].startAngle+n._chrom.groups[a].endAngle)/2};A.push(e)}),this._network.node_parent_map=z,this._network.nodes_array=A,this._network.links_array=[],this._network.link_hovercard=vq.hovercard({canvas_id:n._plot.id,include_header:!1,include_footer:!0,self_hover:!0,timeout:n._plot.tooltip_timeout,data_config:n._network.link_tooltipItems,tool_config:n._network.link_tooltipLinks}),this._network.node_hovercard=vq.hovercard({canvas_id:n._plot.id,include_header:!1,include_footer:!0,self_hover:!0,timeout:n._plot.tooltip_timeout,data_config:n._network.node_tooltipItems,tool_config:n._network.node_tooltipLinks}),this._insertEdges(n._data.edges),this.setDataReady(!0)}},vq.models.CircVisData.prototype._remove_wedge_data=function(a){var b=this,c=a.chr;_.each(this._ideograms[c].wedge,function(d,e){d._globalData&&(b._ideograms[c].wedge[e]=_.reject(d,function(c){return b.same_feature(c,a)}))})},vq.models.CircVisData.prototype._add_wedge_data=function(a){var b=this,c=a.chr;_.each(this._ideograms[c].wedge,function(c,d){if(c._globalData){if(_.isUndefined(a[b._wedge[d]._value_key])||b._wedge[d]._plot_type=="karyotype")return;c.push(a)}})},vq.models.CircVisData.prototype.same_feature=function(a,b){return this._data.hash(a)==this._data.hash(b)},vq.models.CircVisData.prototype.same_edge=function(a,b){return this.same_feature(a.source,b.source)&&this.same_feature(a.target,b.target)},vq.models.CircVisData.prototype._retileWedge=function(){var a=this;_.each(this._wedge,function(b,c){var d=b._globalData?a._data.features:b._data;if(b._plot_type=="tile"||b._plot_type=="glyph"){var e=b._tile.show_all_tiles?Math.floor((b._plot_height-b._radius()*2)/(b._tile.height+b._tile.padding)):undefined,f=b._plot_type=="tile"?vq.utils.VisUtils.layoutChrTiles(d,b._tile.overlap_distance,e):vq.utils.VisUtils.layoutChrTicks(d,b._tile.overlap_distance,e);b._layout={},_.each(f,function(a){b._layout[b._hash(a)]=a.level})}})},vq.models.CircVisData.prototype._retileTicks=function(){var a=this,b,c=vq.utils.VisUtils.layoutChrTicks(this._data.features,this.ticks.overlap_distance),d=this.ticks._layout,e=a._data.hash;_.each(c,function(a){d[e(a)]=a.level})},vq.models.CircVisData.prototype._format_network_node=function(a){function e(a){var d,e=b._network.nodes_array[c[a.chr]];if(!_.isUndefined(e)){d=_.extend({parent:e},a);return d}return null}var b=this,c=this._network.node_parent_map,d=this._data.hash;if(_.isArray(a))return _.compact(_.map(a,e,b));return e.call(b,a)},vq.models.CircVisData.prototype._remove_layouts=function(a){var b=this,c=this._data.hash(a);delete this.ticks._layout[c],delete this._network.layout[c],_.each(this._wedge,function(a){a._layout&&a._layout[c]&&delete a._layout[c]})},vq.models.CircVisData.prototype._remove_feature=function(a){var b=this,c=-1;_.each(this._data.chr[a.chr],function(d,e){b.same_feature(d,a)&&(c=e)}),!~c||this._data.chr[a.chr].splice(c,1),c=-1,_.each(this._data.features,function(d,e){b.same_feature(d,a)&&(c=e)}),!~c||this._data.features.splice(c,1);return this},vq.models.CircVisData.prototype._insertNode=function(a){var b=this,c,d=this._data.hash;if(!_.include(_.keys(b._chrom.groups),a.chr))return null;if(c=_.find(b._data.features,function(b){return d(b)===d(a)}))return c;b._data.features.push(a),b._data.chr[a.chr].push(a);return a},vq.models.CircVisData.prototype._insertNodes=function(a){var b=this,c=[],d=_.map(a,this._insertNode,this);this._retile();return d},vq.models.CircVisData.prototype._retile=function(){this._retileNodes(),this._retileTicks(),this._retileWedge();return this},vq.models.CircVisData.prototype._retileNodes=function(){var a=this;this._network.tile_nodes&&this._data.features.length&&(nodes=vq.utils.VisUtils.layoutChrTiles(a._data.features,a._network.node_overlap_distance),_.each(nodes,function(b){a._network.layout[a._data.hash(b)]=b.level}));return this},vq.models.CircVisData.prototype._removeNode=function(a){!_.isObject(a)||this._remove_feature(a)},vq.models.CircVisData.prototype._insertEdges=function(a){var b=this;_.each(a,this._insertEdge,b)},vq.models.CircVisData.prototype._insertEdge=function(a){var b=[a.node1,a.node2],c=this;if(_.any(b,function(a){return _.isNull(a)||!_.include(_.keys(c._chrom.groups),a.chr)})){console.log("Unmappable chromosome in edge: 1:"+b[0].chr+", 2:"+b[1].chr);return null}var d=_.map([b[0],b[1]],c._insertNode,c);if(_.any(d,function(a){return _.isNull(a)})){console.error("Unable to insert node for requested edge");return null}var e=_.chain(a).keys().reject(function(a){return a=="node1"||a=="node2"}).value();d=_.map(d,this._format_network_node,this);var f=_.chain(a).pick(e).extend({source:d[0],target:d[1]}).value();if(_.any(this._network.links_array,function(a){return c.same_edge(f,a)}))return null;this._network.links_array.push(f);return f},vq.models.CircVisData.prototype._removeEdge=function(a){var b=this;if(_.isObject(a)){var c=-1;_.each(this._network.links_array,function(d,e){b.same_edge(d,_.extend({},{source:a.node1,target:a.node2},a))&&(c=e)}),c&&this._network.links_array.splice(c,1)}},vq.models.CircVisData.prototype._removeEdges=function(a){var b=this;_.isArray(a)&&_.each(a,this._removeEdge,this)},vq.models.CircVisData.WedgeData=function(a){vq.models.VisData.call(this,{CONTENTS:a}),this.setDataModel(),this._build_data(this.getContents())},vq.models.CircVisData.WedgeData.prototype=vq.extend(vq.models.VisData),vq.models.CircVisData.WedgeData.prototype.setDataModel=function(){this._dataModel=[{label:"_data",id:"DATA.data_array",defaultValue:[]},{label:"_value_key",id:"DATA.value_key",defaultValue:"value",cast:String},{label:"_hash",id:"DATA.hash",optional:!0,cast:vq.utils.VisUtils.wrapProperty},{label:"listener",id:"OPTIONS.listener",defaultValue:function(a,b){}},{label:"_plot_type",id:"PLOT.type",defaultValue:"histogram"},{label:"_plot_height",id:"PLOT.height",cast:Number,defaultValue:100},{label:"_fillStyle",id:"OPTIONS.fill_style",cast:vq.utils.VisUtils.wrapProperty,defaultValue:function(a){return"red"}},{label:"_strokeStyle",id:"OPTIONS.stroke_style",cast:vq.utils.VisUtils.wrapProperty,defaultValue:function(a){return"black"}},{label:"_lineWidth",id:"OPTIONS.line_width",cast:Number,defaultValue:.5},{label:"_shape",id:"OPTIONS.shape",cast:vq.utils.VisUtils.wrapProperty,defaultValue:function(a){return"circle"}},{label:"_radius",id:"OPTIONS.radius",cast:vq.utils.VisUtils.wrapProperty,defaultValue:function(a){return 2}},{label:"_outer_padding",id:"OPTIONS.outer_padding",cast:Number,defaultValue:1},{label:"_min_plotValue",id:"OPTIONS.min_value",cast:Number,optional:!0},{label:"_max_plotValue",id:"OPTIONS.max_value",cast:Number,optional:!0},{label:"_base_plotValue",id:"OPTIONS.base_value",cast:Number,optional:!0},{label:"_legend_label",id:"OPTIONS.legend_label",cast:String,defaultValue:""},{label:"_legend_desc",id:"OPTIONS.legend_description",cast:String,defaultValue:""},{label:"_draw_axes",id:"OPTIONS.draw_axes",cast:Boolean,defaultValue:!0},{label:"_draw_axes",id:"OPTIONS.show_tooltips",cast:Boolean,defaultValue:!0},{label:"_tooltipFormat",id:"OPTIONS.tooltipFormat",cast:vq.utils.VisUtils.wrapProperty,defaultValue:function(a,b){return"Chr "+b+"\nStart: "+a.start+"\nEnd: "+a.end}},{label:"_tooltipItems",id:"OPTIONS.tooltip_items",defaultValue:{Chr:"chr",Start:"start",End:"end",Value:"value"}},{label:"_tooltipLinks",id:"OPTIONS.tooltip_links",defaultValue:{}},{label:"_tile.padding",id:"OPTIONS.tile_padding",cast:Number,defaultValue:5},{label:"_tile.overlap_distance",id:"OPTIONS.tile_overlap_distance",cast:Number,defaultValue:.1},{label:"_tile.height",id:"OPTIONS.tile_height",cast:Number,defaultValue:5},{label:"_tile.show_all_tiles",id:"OPTIONS.tile_show_all_tiles",cast:Boolean,defaultValue:!1}]},vq.models.CircVisData.WedgeData.prototype._build_data=function(a){this._processData(a)}